{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\loeva\\\\Documents\\\\La_Capsule\\\\Projets\\\\MyMoviz\\\\Part5\\\\MyMovizApp\\\\ReactApp\\\\src\\\\App.js\";\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport { Container, Row, Button, Nav, NavItem, NavLink, Popover, PopoverHeader, PopoverBody, ListGroup, ListGroupItem, ListGroupItemText } from 'reactstrap';\nimport Movie from './components/Movie';\n\nfunction App() {\n  /* INITIALISATION DES ETATS */\n  const [popoverOpen, setPopoverOpen] = useState(false); //Popover\n\n  const [moviesWishList, setMoviesWishList] = useState([]); //Wishlist\n\n  const [moviesCount, setMoviesCount] = useState(0); //Compteur Wishlist\n\n  const [movieList, setMovieList] = useState([]);\n  /* EVENEMENT POPOVER */\n\n  const toggle = () => setPopoverOpen(!popoverOpen);\n  /* EVENEMENT AJOUT MOVIE WISHLIST */\n\n\n  var handleClickAddMovie = (name, img) => {\n    setMoviesCount(moviesCount + 1); //Incrémente le compteur de la Wishlist\n\n    setMoviesWishList([...moviesWishList, {\n      name: name,\n      img: img\n    }]);\n  };\n  /* EVENEMENT SUPPRESSION MOVIE WISHLIST */\n\n\n  var handleClickDeleteMovie = name => {\n    console.log('click détécté!');\n    setMoviesCount(moviesCount - 1); //Décrémente le compteur de la Wishlist\n\n    setMoviesWishList(moviesWishList.filter(object => object.name != name)); //HERE\n  };\n  /* CREATION DE LA WISHLIST */\n\n\n  var cardWish = moviesWishList.map((movie, i) => {\n    return React.createElement(ListGroupItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35\n      },\n      __self: this\n    }, React.createElement(ListGroupItemText, {\n      onClick: () => {\n        handleClickDeleteMovie(movie.name);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      width: \"25%\",\n      src: movie.img,\n      alt: movie.name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }), \" \", movie.name));\n  });\n  useEffect(() => {\n    async function loadData() {\n      var rawResponse = await fetch('/new-movies');\n      var response = await rawResponse.json();\n      setMovieList(response.movies);\n    }\n\n    loadData();\n  }, []);\n  /* CREATION LISTE MOVIES */\n\n  var movieListItems = movieList.map((movie, i) => {\n    var result = moviesWishList.find(element => element.name == movie.name);\n    var isSee = false;\n\n    if (result != undefined) {\n      isSee = true;\n    }\n\n    var image;\n\n    if (movie.backdrop_path == null) {\n      image = './generique.jpg';\n    } else {\n      image = 'https://image.tmdb.org/t/p/w500/' + movie.backdrop_path;\n    }\n\n    var description = movie.overview;\n\n    if (description.length > 80) {\n      description = description.slice(0, 80) + '...';\n    }\n\n    return React.createElement(Movie, {\n      key: i,\n      movieName: movie.title,\n      movieDesc: description,\n      movieImg: image,\n      globalRating: movie.popularity,\n      globalCountRating: movie.vote_count,\n      handleClickAddMovieParent: handleClickAddMovie,\n      handleClickDeleteMovieParent: handleClickDeleteMovie,\n      movieSee: isSee,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    });\n  });\n  console.log('movieList : ' + movieListItems[1]);\n  return React.createElement(\"div\", {\n    style: {\n      backgroundColor: \"#222f3e\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(Nav, {\n    className: \"align-items-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"navbar-brand\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: \"./logo.png\",\n    width: \"30\",\n    height: \"30\",\n    className: \"d-inline-block align-top\",\n    alt: \"logo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  })), React.createElement(NavItem, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(NavLink, {\n    id: \"navName\",\n    style: {\n      color: 'white'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, \"Last Releases\")), React.createElement(NavItem, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(NavLink, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(Button, {\n    id: \"Popover1\",\n    type: \"button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, moviesCount, \" films\", React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(Popover, {\n    placement: \"bottom\",\n    isOpen: popoverOpen,\n    target: \"Popover1\",\n    toggle: toggle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(PopoverHeader, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"WishList\"), React.createElement(PopoverBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, React.createElement(ListGroup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, cardWish)))))))), React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, movieListItems)));\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/loeva/Documents/La_Capsule/Projets/MyMoviz/Part5/MyMovizApp/ReactApp/src/App.js"],"names":["React","useState","useEffect","Container","Row","Button","Nav","NavItem","NavLink","Popover","PopoverHeader","PopoverBody","ListGroup","ListGroupItem","ListGroupItemText","Movie","App","popoverOpen","setPopoverOpen","moviesWishList","setMoviesWishList","moviesCount","setMoviesCount","movieList","setMovieList","toggle","handleClickAddMovie","name","img","handleClickDeleteMovie","console","log","filter","object","cardWish","map","movie","i","loadData","rawResponse","fetch","response","json","movies","movieListItems","result","find","element","isSee","undefined","image","backdrop_path","description","overview","length","slice","title","popularity","vote_count","backgroundColor","color"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport './App.css';\r\nimport {Container, Row, Button, Nav, NavItem, NavLink, Popover, PopoverHeader, PopoverBody, ListGroup, ListGroupItem, ListGroupItemText} from 'reactstrap';\r\nimport Movie from './components/Movie';\r\n \r\nfunction App() {\r\n\r\n  /* INITIALISATION DES ETATS */\r\n  const [popoverOpen, setPopoverOpen] = useState(false); //Popover\r\n  const [moviesWishList, setMoviesWishList]=useState([]); //Wishlist\r\n  const [moviesCount, setMoviesCount]= useState(0); //Compteur Wishlist\r\n  const [movieList, setMovieList]= useState([]);\r\n \r\n\r\n  /* EVENEMENT POPOVER */\r\n  const toggle = () => setPopoverOpen(!popoverOpen);\r\n\r\n  /* EVENEMENT AJOUT MOVIE WISHLIST */\r\n  var handleClickAddMovie=(name, img)=>{\r\n    setMoviesCount(moviesCount+1); //Incrémente le compteur de la Wishlist\r\n    setMoviesWishList([...moviesWishList, {name: name, img: img}]);\r\n  }\r\n\r\n  /* EVENEMENT SUPPRESSION MOVIE WISHLIST */\r\n  var handleClickDeleteMovie=(name)=>{\r\n    console.log('click détécté!')\r\n    setMoviesCount(moviesCount-1); //Décrémente le compteur de la Wishlist\r\n    setMoviesWishList(moviesWishList.filter(object => object.name != name)); //HERE\r\n  }\r\n\r\n\r\n  /* CREATION DE LA WISHLIST */\r\n  var cardWish=moviesWishList.map((movie, i) => {\r\n    return(\r\n      <ListGroupItem>\r\n        <ListGroupItemText onClick={() => {handleClickDeleteMovie(movie.name)}}>\r\n          <img width=\"25%\" src={movie.img} alt={movie.name}/> {movie.name}\r\n        </ListGroupItemText>\r\n      </ListGroupItem>\r\n    )\r\n  })\r\n\r\n\r\n  useEffect(()=>{\r\n    async function loadData() {\r\n      var rawResponse= await fetch('/new-movies')\r\n      var response= await rawResponse.json();\r\n      setMovieList(response.movies)\r\n      \r\n    }\r\n    loadData();\r\n  }, [])\r\n\r\n\r\n   /* CREATION LISTE MOVIES */\r\n   var movieListItems = movieList.map((movie, i) => {\r\n    var result = moviesWishList.find(element => element.name == movie.name)\r\n    var isSee = false\r\n    if(result != undefined){\r\n      isSee = true\r\n    }\r\n    var image;\r\n    if(movie.backdrop_path ==null){\r\n      image= './generique.jpg';\r\n    }else{\r\n      image= 'https://image.tmdb.org/t/p/w500/'+ movie.backdrop_path;\r\n    }\r\n    var description =movie.overview;\r\n    if(description.length>80){\r\n      description= description.slice(0,80)+'...'\r\n    }\r\n\r\n    return(<Movie key={i} movieName={movie.title} movieDesc={description} movieImg={image} globalRating={movie.popularity} globalCountRating={movie.vote_count} handleClickAddMovieParent={handleClickAddMovie} handleClickDeleteMovieParent={handleClickDeleteMovie} movieSee={isSee} />)\r\n  })\r\n\r\n  console.log('movieList : ' + movieListItems[1])\r\n\r\n\r\n  return (\r\n    <div style={{backgroundColor:\"#222f3e\"}}>\r\n      <Container>\r\n\r\n        <Nav className=\"align-items-center\">\r\n          <span className=\"navbar-brand\">\r\n            <img src=\"./logo.png\"width=\"30\" height=\"30\" className=\"d-inline-block align-top\" alt=\"logo\" />\r\n          </span>\r\n          <NavItem>\r\n            <NavLink id='navName' style={{color:'white'}}>Last Releases</NavLink>\r\n          </NavItem>\r\n          <NavItem>\r\n            <NavLink>\r\n              <Button id=\"Popover1\" type=\"button\">{moviesCount} films \r\n              <div>\r\n                <Popover placement=\"bottom\" isOpen={popoverOpen} target=\"Popover1\" toggle={toggle}>\r\n                  <PopoverHeader>WishList</PopoverHeader>\r\n                  <PopoverBody>\r\n                    <ListGroup>\r\n                      {cardWish}\r\n                    </ListGroup>\r\n                  </PopoverBody>\r\n                </Popover>\r\n              </div>\r\n              </Button>\r\n            </NavLink>\r\n          </NavItem>\r\n        </Nav>\r\n      \r\n        <Row>\r\n          {movieListItems}\r\n        </Row>\r\n\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}